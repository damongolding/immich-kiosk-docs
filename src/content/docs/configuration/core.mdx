---
title: Core
sidebar:
  badge:
    text: Required
    variant: danger
---

import { Aside } from "@astrojs/starlight/components";
import Settings from "../../../components/config-settings.astro";

## Immich API key

<Aside type="tip">
    You can find the required API key permissions [here](/installation/#api-key-permissions).
</Aside>

The API for your Immich server.

<Settings config="immich_api_key" env="KIOSK_IMMICH_API_KEY" url="N/A" value="string" />

---

## Immich URL

The URL of your Immich server. MUST include a port if one is needed e.g. `http://192.168.1.123:2283`.

<Settings config="immich_url" env="KIOSK_IMMICH_URL" url="N/A" value="string" />

---

## Immich External URL

The public URL of your Immich server used for generating links and QR codes in the additional information overlay. Useful when accessing Immich through a reverse proxy or different external URL.

Example: `https://photos.example.com`.

If not set, falls back to immich_url.

<Settings config="immich_external_url" env="KIOSK_IMMICH_EXTERNAL_URL" url="N/A" value="string" />

## Secrets :badge[New]{variant="note"}

Secrets can be used to securely pass sensitive information such as API keys or passwords to Kiosk.

#### Supported Variables

| config                                                                              | ENV                       |
| ----------------------------------------------------------------------------------- | ------------------------- |
| immich_api_key                                                                      | KIOSK_IMMICH_API_KEY_FILE |
| [password](https://docs.immichkiosk.app/configuration/additional-options/#password) | KIOSK_PASSWORD_FILE       |

### Docker secrets

You may also supply select variables via a docker secret. You will need to create a docker secret, add that secret to the Kiosk service, then tell Kiosk where to find the secret via the environment variable e.g. `KIOSK_IMMICH_API_KEY_FILE`.

#### Example with a minimal docker-compose file

```yaml
services:
  immich-kiosk:
    image: ghcr.io/damongolding/immich-kiosk:latest
    environment:
      KIOSK_IMMICH_URL: http://192.168.1.123:2283
      KIOSK_IMMICH_API_KEY_FILE: /run/secrets/immich_api_key
      KIOSK_PASSWORD_FILE: /run/secrets/password
    secrets:
      - immich_api_key
      - password

secrets:
  immich_api_key:
    file: /path/to/immich_api_key.txt
  password:
    file: /path/to/password.txt
```

### Systemd credential :badge[New]{variant="note"}

You may also supply select variables via systemd credentials.

#### Example with a minimal service file

```ini
[Unit]
Description=Immich Kiosk Service
After=network.target

[Service]
Type=simple
User=immichkiosk
Group=immichkiosk
WorkingDirectory=/opt/immich-kiosk
Environment="KIOSK_IMMICH_URL=http://192.168.1.123:2283"
LoadCredential=kiosk_immich_api_key:/path/to/immich_api_key.txt
LoadCredential=kiosk_password:/path/to/password.txt
ExecStart=/opt/immich-kiosk/immich-kiosk
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
```
